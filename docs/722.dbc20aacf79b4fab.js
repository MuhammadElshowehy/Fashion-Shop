"use strict";(self.webpackChunkECommerce=self.webpackChunkECommerce||[]).push([[722],{2722:(J,p,i)=>{i.r(p),i.d(p,{CartModule:()=>A});var u=i(9310),d=i(6282),t=i(4946),g=i(120),l=i(6814),m=i(6992),h=i(8467),f=i(4131),v=i(1379);function C(e,s){1&e&&t._UZ(0,"app-loading")}function _(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"div",7)(1,"button",8),t.NdJ("click",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.removeAll())}),t._uU(2," Remove all products "),t.qZA()()}}function y(e,s){if(1&e&&t._UZ(0,"app-cart-or-favorite-empty",9),2&e){const n=t.oxw();t.Q6J("titlePage",n.cart)}}function P(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"div",12),t._UZ(1,"app-product",13),t.TgZ(2,"div",14)(3,"label",15),t._uU(4,"Quantity:"),t.qZA(),t.TgZ(5,"input",16),t.NdJ("input",function(r){const a=t.CHM(n).$implicit,Q=t.oxw(2);return t.KtG(Q.calcQuantity(a,r))}),t.qZA()(),t.TgZ(6,"button",17),t.NdJ("click",function(){const c=t.CHM(n).index,a=t.oxw(2);return t.KtG(a.remove(c))}),t._uU(7," Remove from cart "),t.qZA()()}if(2&e){const n=s.$implicit;t.xp6(1),t.Q6J("productComp",n),t.xp6(4),t.s9C("value",n.quantity)}}function x(e,s){if(1&e&&(t.TgZ(0,"div",10),t.YNc(1,P,8,2,"div",11),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.cartProducts)}}function M(e,s){if(1&e&&(t.TgZ(0,"button",21),t._uU(1," Your total price is: "),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"currency"),t.qZA()()),2&e){const n=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,1,n.totalPrice))}}function T(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"div",18),t.YNc(1,M,5,3,"button",19),t.TgZ(2,"button",20),t.NdJ("click",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.goToCheckOut())}),t._uU(3," Proceed to checkout \u2192 "),t.qZA()()}if(2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.validQuantity),t.xp6(1),t.Q6J("disabled",!n.validQuantity)}}const U=[{path:"",canActivate:[d.a],component:(()=>{var e;class s{constructor(o,r){this.router=o,this.productsService=r,this.cartProducts=[],this.isEmpty=!0,this.isLoading=!1,this.cart="Cart",this.popupMessage="",this.totalPrice=0,this.validQuantity=!0}getAuthUser(){return JSON.parse(localStorage.getItem("authUser"))}setAuthUser(o){localStorage.setItem("authUser",JSON.stringify(o))}ngOnInit(){this.authUser=this.getAuthUser(),this.cartProducts=this.placeDefaultQuantity(this.authUser.cart),this.authUser.cart=this.cartProducts,this.setAuthUser(this.authUser),this.calcTotalPrice(),this.isEmpty=0===this.cartProducts.length}placeDefaultQuantity(o){let r=[];for(let c of o)c.quantity||(c=Object.assign({quantity:1},c)),r.push(c);return r}calcQuantity(o,r){let c=+r.target.value;if(c<1)return this.validQuantity=!1,void(this.popupMessage="Please insert a positive number!");this.validQuantity=!0,o.quantity=c;for(let a of this.cartProducts)a.id===o.id&&(a=o);this.authUser.cart=this.cartProducts,this.setAuthUser(this.authUser),this.calcTotalPrice()}calcTotalPrice(){let o=0;for(let r of this.cartProducts)o+=r.price*r.quantity;this.totalPrice=o}receivedFromPopup(o){this.popupMessage=o}removedSuccessfully(){this.popupMessage="Product removed successfully"}removeAll(){this.isLoading=!0,setTimeout(()=>{this.cartProducts=[],this.authUser.cart=[],this.setAuthUser(this.authUser),this.isEmpty=!0,this.totalPrice=0,this.isLoading=!1,this.productsService.calcCartLength()},1e3)}remove(o){this.isLoading=!0,setTimeout(()=>{this.cartProducts.splice(o,1),this.removedSuccessfully(),this.authUser.cart=this.cartProducts,this.setAuthUser(this.authUser),this.cartProducts.length?this.calcTotalPrice():(this.isEmpty=!0,this.totalPrice=0),this.isLoading=!1,this.productsService.calcCartLength()},1e3)}goToCheckOut(){this.isLoading=!0,!1!==this.validQuantity&&setTimeout(()=>{this.router.navigate(["/checkout"]),this.isLoading=!1},1e3)}}return(e=s).\u0275fac=function(o){return new(o||e)(t.Y36(u.F0),t.Y36(g.s))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-cart"]],decls:11,vars:6,consts:[[4,"ngIf"],[1,"top"],["class","remove-all",4,"ngIf"],[3,"popupMessage","closePopupMessage"],[3,"titlePage",4,"ngIf"],["class","row",4,"ngIf"],["class","proceed",4,"ngIf"],[1,"remove-all"],["type","button",1,"btn","text-light",3,"click"],[3,"titlePage"],[1,"row"],["class","col-sm-6 col-md-6 col-xl-3 col-lg-4",4,"ngFor","ngForOf"],[1,"col-sm-6","col-md-6","col-xl-3","col-lg-4"],[3,"productComp"],[1,"form-group","m-1"],["for","quantity"],["id","quantity","type","number","min","1",1,"form-control",3,"value","input"],["type","button",1,"btn","w-100","p-2","text-light",3,"click"],[1,"proceed"],["class","btn","type","button","disabled","",4,"ngIf"],["type","button",1,"btn","text-light",3,"disabled","click"],["type","button","disabled","",1,"btn"]],template:function(o,r){1&o&&(t.YNc(0,C,1,0,"app-loading",0),t.TgZ(1,"div",1)(2,"h1"),t._uU(3,"Your wonderful cart list"),t.qZA(),t.YNc(4,_,3,0,"div",2),t.qZA(),t._UZ(5,"hr"),t.TgZ(6,"app-popup-message",3),t.NdJ("closePopupMessage",function(a){return r.receivedFromPopup(a)}),t.qZA(),t.YNc(7,y,1,1,"app-cart-or-favorite-empty",4),t.TgZ(8,"main"),t.YNc(9,x,2,1,"div",5),t.qZA(),t.YNc(10,T,4,2,"div",6)),2&o&&(t.Q6J("ngIf",r.isLoading),t.xp6(4),t.Q6J("ngIf",!r.isEmpty),t.xp6(2),t.Q6J("popupMessage",r.popupMessage),t.xp6(1),t.Q6J("ngIf",r.isEmpty),t.xp6(2),t.Q6J("ngIf",r.cartProducts),t.xp6(1),t.Q6J("ngIf",r.totalPrice))},dependencies:[l.sg,l.O5,m.N,h.p,f.F,v.h,l.H9],styles:[".top[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}button[_ngcontent-%COMP%]{background-color:var(--darkPurple);border:1px solid var(--orange)}button[_ngcontent-%COMP%]:hover{background-color:var(--orange)}.proceed[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;row-gap:10px;margin-top:30px}.proceed[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{width:245px;display:flex;justify-content:space-between;align-items:center}.proceed[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--darkPurple);font-size:1.25rem}.proceed[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{font-size:1.25rem;width:245px}.form-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;column-gap:10px}span[_ngcontent-%COMP%]{color:red}label[_ngcontent-%COMP%]{color:var(--darkPurple)}@media (max-width: 576px){main[_ngcontent-%COMP%]{max-width:360px}main[_ngcontent-%COMP%]{justify-content:center;margin:auto}.top[_ngcontent-%COMP%], .proceed[_ngcontent-%COMP%]{flex-direction:column}}"]}),s})()}];let Z=(()=>{var e;class s{}return(e=s).\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.Bz.forChild(U),u.Bz]}),s})();var O=i(6208);let A=(()=>{var e;class s{}return(e=s).\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[Z,O.m]}),s})()}}]);