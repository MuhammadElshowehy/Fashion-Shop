"use strict";(self.webpackChunkECommerce=self.webpackChunkECommerce||[]).push([[234],{6234:(q,s,l)=>{l.r(s),l.d(s,{CheckoutModule:()=>U});var p=l(6814),r=l(95),d=l(6208),u=l(9310),m=l(6282),e=l(4946);let g=(()=>{var t;class i{constructor(n){this.router=n}canActivate(n,o){if(JSON.parse(localStorage.getItem("authUser")).cart.length>=1)return!0;this.router.navigate(["/cart"])}}return(t=i).\u0275fac=function(n){return new(n||t)(e.LFG(u.F0))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),i})(),h=(()=>{var t;class i{constructor(){this.products=[],this.shipping=9.99}getProducts(){return this.products=JSON.parse(localStorage.getItem("authUser")).cart,this.products}totalWithoutShipping(){let n=0;for(let o of this.products)n+=o.price*o.quantity;return this.totalPriceWithoutShipping=n,n}totalWithShipping(){let n;return n=this.totalPriceWithoutShipping+this.shipping,n}arrivalDate(){let n=new Date,c=n.setDate(n.getDate()+2);return new Date(c).toLocaleDateString()}}return(t=i).\u0275fac=function(n){return new(n||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),i})();var f=l(6992),C=l(8467);function _(t,i){1&t&&e._UZ(0,"app-loading")}function v(t,i){if(1&t&&(e.TgZ(0,"ul",29)(1,"li")(2,"div",30),e._UZ(3,"img",31),e.qZA(),e.TgZ(4,"div",32)(5,"h4")(6,"span"),e._uU(7,"Title"),e.qZA(),e._uU(8),e.qZA(),e.TgZ(9,"p")(10,"span"),e._uU(11,"Price: "),e.qZA(),e._uU(12),e.qZA(),e.TgZ(13,"p")(14,"span"),e._uU(15,"Quantity: "),e.qZA(),e._uU(16),e.qZA()()()()),2&t){const a=i.$implicit;e.xp6(3),e.s9C("src",a.image,e.LSH),e.s9C("alt",a.title),e.xp6(5),e.hij(" ",a.title,""),e.xp6(4),e.Oqu(a.price),e.xp6(4),e.Oqu(a.quantity)}}function Z(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"Please enter name on card!"),e.qZA())}function P(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"Please enter the 16-digit number!"),e.qZA())}function b(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"Please enter the 3-digit number!"),e.qZA())}function k(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"Please enter expire date!"),e.qZA())}function O(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"Please enter your full name!"),e.qZA())}function y(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"Please enter your street address!"),e.qZA())}function A(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"Please enter your city name!"),e.qZA())}function M(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"Please enter a correct phone number!"),e.qZA())}const T=[{path:"",canActivate:[m.a,g],component:(()=>{var t;class i{constructor(n,o){this.checkoutService=n,this.router=o,this.products=[],this.popupMessage="",this.isLoading=!1,this.order={products:[],totalWithOutShipping:0,totalWithShipping:0,fullName:"",streetAddress:"",city:"",phone:0,arrivalDate:""}}ngOnInit(){this.products=this.checkoutService.getProducts(),this.totalPriceWithoutShipping=this.checkoutService.totalWithoutShipping(),this.totalToPay=this.checkoutService.totalWithShipping(),this.arrivalDate=this.checkoutService.arrivalDate(),this.creditCardForm=new r.cw({nameOnCard:new r.NI(null,[r.kI.required,r.kI.minLength(11)]),cardNumber:new r.NI(null,[r.kI.required,r.kI.pattern(/^\d{16}$/)]),cvvNumber:new r.NI(null,[r.kI.required,r.kI.pattern(/^\d{3}$/)]),expDate:new r.NI(null,[r.kI.required])}),this.billingInfoForm=new r.cw({fullName:new r.NI(null,[r.kI.required,r.kI.minLength(11)]),streetAddress:new r.NI(null,[r.kI.required,r.kI.minLength(8)]),city:new r.NI(null,[r.kI.required,r.kI.minLength(3)]),phone:new r.NI(null,[r.kI.required,r.kI.pattern(/^(?:\+20|0)?1\d{9}$/)])})}receivedFromPopup(n){this.popupMessage=n}saveOrder(){this.order.products=this.products,this.order.totalWithOutShipping=this.totalPriceWithoutShipping,this.order.totalWithShipping=this.totalToPay,this.order.fullName=this.billingInfoForm.get("fullName").value,this.order.streetAddress=this.billingInfoForm.get("streetAddress").value,this.order.city=this.billingInfoForm.get("city").value,this.order.phone=this.billingInfoForm.get("phone").value,this.order.arrivalDate=this.arrivalDate;let n=JSON.parse(localStorage.getItem("authUser"));n.orders.unshift(this.order),localStorage.setItem("authUser",JSON.stringify(n))}placeOrderClicked(){this.creditCardForm.valid&&this.billingInfoForm.valid&&(this.isLoading=!0,setTimeout(()=>{this.saveOrder(),this.popupMessage="Order placed successfully",this.creditCardForm.reset(),this.billingInfoForm.reset()},1500),setTimeout(()=>{this.router.navigate(["/home"]),this.isLoading=!1},3e3))}}return(t=i).\u0275fac=function(n){return new(n||t)(e.Y36(h),e.Y36(u.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-checkout"]],decls:85,vars:29,consts:[[4,"ngIf"],[3,"popupMessage","closePopupMessage"],[1,"row"],[1,"products","col-sm-12","col-md-4"],["class","product",4,"ngFor","ngForOf"],[1,"payment","col-sm-12","col-md-8"],[1,"forms"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","card-name",1,"form-label"],["type","text","id","card-name",1,"form-control",3,"formControlName"],["for","card-number",1,"form-label"],["type","number","id","card-number","placeholder","1234 1234 1234 1234",1,"form-control",3,"formControlName"],["for","cvv-number",1,"form-label"],["type","number","id","cvv-number","placeholder","123",1,"form-control",3,"formControlName"],["for","exp-date",1,"form-label"],["type","date","id","exp-date",1,"form-control",3,"formControlName"],["for","full-name",1,"form-label"],["type","text","id","full-name",1,"form-control",3,"formControlName"],["for","street-address",1,"form-label"],["type","text","id","street-address",1,"form-control",3,"formControlName"],["for","city",1,"form-label"],["type","text","id","city",1,"form-control",3,"formControlName"],["for","phone",1,"form-label"],["type","number","id","phone","placeholder","ex: 01012345678",1,"form-control",3,"formControlName"],[1,"col-lg-4","col-md-4","col-sm-12"],[1,"col-lg-4","col-md-8","col-sm-12"],[1,"col-lg-4","col-md-8","col-sm-12","m-auto"],["type","submit",1,"btn","w-100",3,"disabled","click"],[1,"product"],[1,"image"],["loading","lazy",3,"src","alt"],[1,"text"]],template:function(n,o){1&n&&(e.YNc(0,_,1,0,"app-loading",0),e.TgZ(1,"app-popup-message",1),e.NdJ("closePopupMessage",function(x){return o.receivedFromPopup(x)}),e.qZA(),e.TgZ(2,"h1"),e._uU(3,"Checkout"),e.qZA(),e.TgZ(4,"div",2)(5,"section",3)(6,"h2"),e._uU(7,"Your cart"),e.qZA(),e._UZ(8,"hr"),e.TgZ(9,"div"),e.YNc(10,v,17,5,"ul",4),e.TgZ(11,"p")(12,"span"),e._uU(13,"Total price: "),e.qZA(),e._uU(14),e.ALo(15,"currency"),e.qZA()()(),e.TgZ(16,"section",5)(17,"div",6)(18,"form",7),e.NdJ("ngSubmit",function(){return o.placeOrderClicked()}),e.TgZ(19,"caption")(20,"h2"),e._uU(21,"credit card info"),e.qZA()(),e.TgZ(22,"div",8)(23,"label",9),e._uU(24,"name on card"),e.qZA(),e._UZ(25,"input",10),e.YNc(26,Z,2,0,"span",0),e.qZA(),e.TgZ(27,"div",8)(28,"label",11),e._uU(29,"card number"),e.qZA(),e._UZ(30,"input",12),e.YNc(31,P,2,0,"span",0),e.qZA(),e.TgZ(32,"div",8)(33,"label",13),e._uU(34,"cvv number"),e.qZA(),e._UZ(35,"input",14),e.YNc(36,b,2,0,"span",0),e.qZA(),e.TgZ(37,"div",8)(38,"label",15),e._uU(39,"exp-date"),e.qZA(),e._UZ(40,"input",16),e.YNc(41,k,2,0,"span",0),e.qZA()(),e.TgZ(42,"form",7),e.NdJ("ngSubmit",function(){return o.placeOrderClicked()}),e.TgZ(43,"caption")(44,"h2"),e._uU(45,"billing info"),e.qZA()(),e.TgZ(46,"div",8)(47,"label",17),e._uU(48,"full name"),e.qZA(),e._UZ(49,"input",18),e.YNc(50,O,2,0,"span",0),e.qZA(),e.TgZ(51,"div",8)(52,"label",19),e._uU(53,"street address"),e.qZA(),e._UZ(54,"input",20),e.YNc(55,y,2,0,"span",0),e.qZA(),e.TgZ(56,"div",8)(57,"label",21),e._uU(58,"city"),e.qZA(),e._UZ(59,"input",22),e.YNc(60,A,2,0,"span",0),e.qZA(),e.TgZ(61,"div",8)(62,"label",23),e._uU(63,"phone"),e.qZA(),e._UZ(64,"input",24),e.YNc(65,M,2,0,"span",0),e.qZA()()()()(),e.TgZ(66,"div",2)(67,"div",25)(68,"p")(69,"span"),e._uU(70,"Shipping cost: "),e.qZA(),e._uU(71,"$9.99"),e.qZA(),e.TgZ(72,"p")(73,"span"),e._uU(74,"Total to pay: "),e.qZA(),e._uU(75),e.ALo(76,"currency"),e.qZA()(),e.TgZ(77,"div",26)(78,"p")(79,"span"),e._uU(80,"Arrive date: "),e.qZA(),e._uU(81),e.qZA()(),e.TgZ(82,"div",27)(83,"button",28),e.NdJ("click",function(){return o.placeOrderClicked()}),e._uU(84," Place order "),e.qZA()()()),2&n&&(e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("popupMessage",o.popupMessage),e.xp6(9),e.Q6J("ngForOf",o.products),e.xp6(4),e.hij("",e.lcZ(15,25,o.totalPriceWithoutShipping)," "),e.xp6(4),e.Q6J("formGroup",o.creditCardForm),e.xp6(7),e.Q6J("formControlName","nameOnCard"),e.xp6(1),e.Q6J("ngIf",o.creditCardForm.get("nameOnCard").invalid&&o.creditCardForm.get("nameOnCard").touched),e.xp6(4),e.Q6J("formControlName","cardNumber"),e.xp6(1),e.Q6J("ngIf",o.creditCardForm.get("cardNumber").invalid&&o.creditCardForm.get("cardNumber").touched),e.xp6(4),e.Q6J("formControlName","cvvNumber"),e.xp6(1),e.Q6J("ngIf",o.creditCardForm.get("cvvNumber").invalid&&o.creditCardForm.get("cvvNumber").touched),e.xp6(4),e.Q6J("formControlName","expDate"),e.xp6(1),e.Q6J("ngIf",o.creditCardForm.get("expDate").invalid&&o.creditCardForm.get("expDate").touched),e.xp6(1),e.Q6J("formGroup",o.billingInfoForm),e.xp6(7),e.Q6J("formControlName","fullName"),e.xp6(1),e.Q6J("ngIf",o.billingInfoForm.get("fullName").invalid&&o.billingInfoForm.get("fullName").touched),e.xp6(4),e.Q6J("formControlName","streetAddress"),e.xp6(1),e.Q6J("ngIf",o.billingInfoForm.get("streetAddress").invalid&&o.billingInfoForm.get("streetAddress").touched),e.xp6(4),e.Q6J("formControlName","city"),e.xp6(1),e.Q6J("ngIf",o.billingInfoForm.get("city").invalid&&o.billingInfoForm.get("city").touched),e.xp6(4),e.Q6J("formControlName","phone"),e.xp6(1),e.Q6J("ngIf",o.billingInfoForm.get("phone").invalid&&o.billingInfoForm.get("phone").touched),e.xp6(10),e.Oqu(e.lcZ(76,27,o.totalToPay)),e.xp6(6),e.hij("",o.arrivalDate," between 9 AM to 9 PM."),e.xp6(2),e.Q6J("disabled",o.creditCardForm.invalid||o.billingInfoForm.invalid))},dependencies:[p.sg,p.O5,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.sg,r.u,f.N,C.p,p.H9],styles:[".row[_ngcontent-%COMP%]:first-of-type{row-gap:20px;border:1px solid var(--darkPurple)}@media (max-width: 576px){.row[_ngcontent-%COMP%]:first-of-type{border:none}}.row[_ngcontent-%COMP%]:last-of-type{padding:20px 0}@media (min-width: 768px){.products[_ngcontent-%COMP%]{border-right:1px solid var(--darkPurple)}}.products[_ngcontent-%COMP%], .payment[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:10px}.products[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{opacity:.5;-webkit-user-select:none;user-select:none}h2[_ngcontent-%COMP%]{margin:10px auto;color:var(--darkPurple);font-size:1.25rem}.product[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;column-gap:10px;align-items:center;padding:5px 0;margin-bottom:10px}.product[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px}.product[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .product[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;max-height:22px;overflow:hidden}.products[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .products[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .row[_ngcontent-%COMP%]:last-of-type   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--purple)}.forms[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;column-gap:24px}form[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{display:block;text-align:center}form[_ngcontent-%COMP%]{width:50%}@media (max-width: 992px){.forms[_ngcontent-%COMP%]{flex-direction:column}form[_ngcontent-%COMP%]{width:100%}}label[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{text-transform:capitalize;color:var(--purple)}h2[_ngcontent-%COMP%]{color:var(--darkPurple)}input[_ngcontent-%COMP%]{border:1px solid var(--darkPurple)}button.w-100[_ngcontent-%COMP%]{color:var(--white);background-color:var(--purple);font-size:1.25rem}button.w-100[_ngcontent-%COMP%]:hover{background-color:var(--darkPurple)}"]}),i})()}];let I=(()=>{var t;class i{}return(t=i).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.Bz.forChild(T),u.Bz]}),i})(),U=(()=>{var t;class i{}return(t=i).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[I,p.ez,r.UX,d.m]}),i})()}}]);