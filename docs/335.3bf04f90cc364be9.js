"use strict";(self.webpackChunkECommerce=self.webpackChunkECommerce||[]).push([[335],{7335:(b,d,p)=>{p.r(d),p.d(d,{UserModule:()=>N});var m=p(6208),a=p(95),g=p(9310),h=p(6282),e=p(4946),_=p(3604),u=p(6814),f=p(6992),Z=p(8467);function U(s,r){1&s&&e._UZ(0,"app-loading")}function w(s,r){1&s&&(e.TgZ(0,"h2",27),e._uU(1,"Your orders"),e.qZA())}function v(s,r){if(1&s&&(e.TgZ(0,"div",34),e._UZ(1,"img",35),e.TgZ(2,"p")(3,"span"),e._uU(4,"Title: "),e.qZA(),e._uU(5),e.qZA(),e.TgZ(6,"p")(7,"span"),e._uU(8,"Quantity: "),e.qZA(),e._uU(9),e.qZA(),e.TgZ(10,"p")(11,"span"),e._uU(12,"Price of single item: "),e.qZA(),e._uU(13),e.ALo(14,"currency"),e.qZA()()),2&s){const o=r.$implicit;e.xp6(1),e.s9C("src",o.image,e.LSH),e.xp6(4),e.Oqu(o.title),e.xp6(4),e.Oqu(o.quantity),e.xp6(4),e.hij("",e.lcZ(14,4,o.price)," ")}}function A(s,r){if(1&s&&(e.TgZ(0,"div",28)(1,"div",29)(2,"span",30),e._uU(3),e.qZA(),e.YNc(4,v,15,6,"div",31),e._UZ(5,"hr",32),e.TgZ(6,"div",33)(7,"div")(8,"p")(9,"span"),e._uU(10,"Full name: "),e.qZA(),e._uU(11),e.qZA(),e.TgZ(12,"p")(13,"span"),e._uU(14,"City: "),e.qZA(),e._uU(15),e.qZA(),e.TgZ(16,"p")(17,"span"),e._uU(18,"Street: "),e.qZA(),e._uU(19),e.qZA(),e.TgZ(20,"p")(21,"span"),e._uU(22,"Phone: "),e.qZA(),e._uU(23),e.qZA()(),e.TgZ(24,"div")(25,"p")(26,"span"),e._uU(27,"Arrival date: "),e.qZA(),e._uU(28),e.qZA(),e.TgZ(29,"p")(30,"span"),e._uU(31,"Total without shipping: "),e.qZA(),e._uU(32),e.ALo(33,"currency"),e.qZA(),e.TgZ(34,"p")(35,"span"),e._uU(36,"Total with shipping: "),e.qZA(),e._uU(37),e.ALo(38,"currency"),e.qZA()()()()()),2&s){const o=r.$implicit,n=r.index;e.xp6(3),e.Oqu(n+1),e.xp6(1),e.Q6J("ngForOf",o.products),e.xp6(7),e.Oqu(o.fullName),e.xp6(4),e.Oqu(o.city),e.xp6(4),e.Oqu(o.streetAddress),e.xp6(4),e.Oqu(o.phone),e.xp6(5),e.Oqu(o.arrivalDate),e.xp6(4),e.hij("",e.lcZ(33,9,o.totalWithOutShipping)," "),e.xp6(5),e.hij("",e.lcZ(38,11,o.totalWithShipping)," ")}}function P(s,r){1&s&&(e.TgZ(0,"span"),e._uU(1," Please insert old password! "),e.qZA())}function C(s,r){1&s&&(e.TgZ(0,"span"),e._uU(1," insert at least six chars contains: 1 upper char, 1 number & 1 special char (!@#$%^&*) "),e.qZA())}function T(s,r){if(1&s&&(e.TgZ(0,"span"),e.YNc(1,P,2,0,"span",0),e.YNc(2,C,2,0,"span",0),e.qZA()),2&s){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.passwordForm.get("oldPass").errors.required),e.xp6(1),e.Q6J("ngIf",o.passwordForm.get("oldPass").errors.pattern)}}function q(s,r){1&s&&(e.TgZ(0,"span"),e._uU(1," Please insert old password! "),e.qZA())}function O(s,r){1&s&&(e.TgZ(0,"span"),e._uU(1," insert at least six chars contains: 1 upper char, 1 number & 1 special char (!@#$%^&*) "),e.qZA())}function x(s,r){if(1&s&&(e.TgZ(0,"span"),e.YNc(1,q,2,0,"span",0),e.YNc(2,O,2,0,"span",0),e.qZA()),2&s){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.passwordForm.get("newPass").errors.required),e.xp6(1),e.Q6J("ngIf",o.passwordForm.get("newPass").errors.pattern)}}const y=[{path:"",canActivate:[h.a],component:(()=>{var s;class r{constructor(n){this.authService=n,this.orders=[],this.isLoading=!1,this.popupMessage=""}ngOnInit(){this.fetchUserData(),this.fetchOrders(),this.passwordForm=new a.cw({oldPass:new a.NI(null,[a.kI.required,a.kI.pattern(/^(?=.*[A-Z])(?=.*[!@#$%^&*])(?=.*[0-9]).{6,}$/)]),newPass:new a.NI(null,[a.kI.required,a.kI.pattern(/^(?=.*[A-Z])(?=.*[!@#$%^&*])(?=.*[0-9]).{6,}$/)])})}fetchUserData(){this.currentUser=JSON.parse(localStorage.getItem("authUser"))}fetchOrders(){this.orders=this.currentUser.orders}ChangePassword(){let n=JSON.parse(localStorage.getItem("authUser"));n&&(this.passwordForm.value.oldPass===n.password?(n.password=this.passwordForm.value.newPass,localStorage.setItem("authUser",JSON.stringify(n)),this.fetchUserData(),this.popupMessage="Password changed successfully",this.passwordForm.reset()):this.popupMessage="Old password is incorrect!")}showPassword(n){this.authService.showPassword(n)}onSubmit(){this.passwordForm.valid&&(this.isLoading=!0,setTimeout(()=>{this.ChangePassword(),this.isLoading=!1},1e3))}received(n){this.popupMessage=n}deleteAccount(){if("delete"===prompt("write 'delete' if you are sure to delete your account")){this.isLoading=!0,this.authService.checkTypeOfUsersInLocaleStorage();let t=this.authService.usersArray;for(let i=0;i<t.length;i++)this.currentUser.email===t[i].email&&setTimeout(()=>{t.splice(i,1),localStorage.setItem("users",JSON.stringify(t)),this.authService.logOut(),this.isLoading=!1},1e3)}else this.popupMessage="You did not type delete correctly!"}}return(s=r).\u0275fac=function(n){return new(n||s)(e.Y36(_.e))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-user"]],decls:56,vars:11,consts:[[4,"ngIf"],[3,"popupMessage","closePopupMessage"],[1,"row"],[1,"col-sm-12"],[1,"personal-info"],[1,"name"],[1,"email"],["class","text-center",4,"ngIf"],["class","orders",4,"ngFor","ngForOf"],[1,"mt-5",3,"formGroup","ngSubmit"],[1,"form-group"],["for","old",1,"form-label"],["type","password","id","old","formControlName","oldPass",1,"form-control","w-50"],["oldPass",""],[1,"m-1","show-password"],["type","checkbox","id","show-old",3,"click"],["for","show-old"],[1,"form-group","mt-3"],["for","new",1,"form-label"],["type","password","id","new","formControlName","newPass",1,"form-control","w-50"],["newPass",""],["type","checkbox","id","show-new",3,"click"],["for","show-new"],["type","submit",1,"btn","text-center","w-25",3,"disabled"],[1,"mt-3"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","text-center","bg-danger","text-light",3,"click"],[1,"text-center"],[1,"orders"],[1,"order","row"],[1,"count"],["class","products col-sm-12 col-md-6 col-lg-4",4,"ngFor","ngForOf"],[1,"m-0"],[1,"order-info","p-0","d-flex","flex-wrap","col-sm-12"],[1,"products","col-sm-12","col-md-6","col-lg-4"],["alt","product-image","loading","lazy",3,"src"]],template:function(n,t){if(1&n){const i=e.EpF();e.YNc(0,U,1,0,"app-loading",0),e.TgZ(1,"app-popup-message",1),e.NdJ("closePopupMessage",function(l){return t.received(l)}),e.qZA(),e.TgZ(2,"h1"),e._uU(3,"profile"),e.qZA(),e._UZ(4,"hr"),e.TgZ(5,"main",2)(6,"section",3)(7,"div",4)(8,"div",5)(9,"p")(10,"span"),e._uU(11,"First name: "),e.qZA(),e._uU(12),e.qZA(),e.TgZ(13,"p")(14,"span"),e._uU(15,"Last name: "),e.qZA(),e._uU(16),e.qZA()(),e.TgZ(17,"p",6)(18,"span"),e._uU(19,"Email: "),e.qZA(),e._uU(20),e.qZA()(),e.YNc(21,w,2,0,"h2",7),e.YNc(22,A,39,13,"div",8),e.TgZ(23,"form",9),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(24,"fieldset")(25,"legend"),e._uU(26,"Change Password:"),e.qZA(),e.TgZ(27,"div",10)(28,"label",11),e._uU(29,"Old password"),e.qZA(),e._UZ(30,"input",12,13),e.TgZ(32,"div",14)(33,"div")(34,"input",15),e.NdJ("click",function(){e.CHM(i);const l=e.MAs(31);return e.KtG(t.showPassword(l))}),e.qZA()(),e.TgZ(35,"label",16),e._uU(36,"show password"),e.qZA()(),e.YNc(37,T,3,2,"span",0),e.qZA(),e.TgZ(38,"div",17)(39,"label",18),e._uU(40,"New password"),e.qZA(),e._UZ(41,"input",19,20),e.TgZ(43,"div",14)(44,"div")(45,"input",21),e.NdJ("click",function(){e.CHM(i);const l=e.MAs(42);return e.KtG(t.showPassword(l))}),e.qZA()(),e.TgZ(46,"label",22),e._uU(47,"show password"),e.qZA()(),e.YNc(48,x,3,2,"span",0),e.qZA(),e.TgZ(49,"div")(50,"button",23),e._uU(51," Change "),e.qZA()()()()(),e._UZ(52,"hr",24),e.TgZ(53,"div",25)(54,"button",26),e.NdJ("click",function(){return t.deleteAccount()}),e._uU(55," Delete account "),e.qZA()()()}2&n&&(e.Q6J("ngIf",t.isLoading),e.xp6(1),e.Q6J("popupMessage",t.popupMessage),e.xp6(11),e.Oqu(t.currentUser.fName),e.xp6(4),e.Oqu(t.currentUser.lName),e.xp6(4),e.Oqu(t.currentUser.email),e.xp6(1),e.Q6J("ngIf",t.orders.length),e.xp6(1),e.Q6J("ngForOf",t.orders),e.xp6(1),e.Q6J("formGroup",t.passwordForm),e.xp6(14),e.Q6J("ngIf",t.passwordForm.get("oldPass").invalid&&t.passwordForm.get("oldPass").touched),e.xp6(11),e.Q6J("ngIf",t.passwordForm.get("newPass").invalid&&t.passwordForm.get("newPass").touched),e.xp6(2),e.Q6J("disabled",t.passwordForm.invalid))},dependencies:[u.sg,u.O5,f.N,Z.p,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,u.H9],styles:["p[_ngcontent-%COMP%]{margin-bottom:5px}p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--purple)}legend[_ngcontent-%COMP%]{font-size:2rem;color:var(--darkPurple)}label[_ngcontent-%COMP%]{color:var(--darkPurple)}input[_ngcontent-%COMP%]{border:1px solid var(--darkPurple)}@media (max-width: 768px){input[_ngcontent-%COMP%]{width:100%!important}}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:40%;margin:10px auto;color:var(--white);background-color:var(--purple)}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--darkPurple);color:var(--white)}h2[_ngcontent-%COMP%]{color:var(--purple);font-size:1.5rem}.order[_ngcontent-%COMP%]{border:1px solid var(--purple);position:relative}.order[_ngcontent-%COMP%]   span.count[_ngcontent-%COMP%]{position:absolute;display:flex;justify-content:center;align-items:center;background-color:var(--darkPurple);color:var(--orange);width:35px;height:35px}.order[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%], .order-info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:10px 10px 10px 45px}.order[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px}.show-password[_ngcontent-%COMP%]{display:flex;align-items:center}.show-password[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:3px}"]}),r})()}];let F=(()=>{var s;class r{}return(s=r).\u0275fac=function(n){return new(n||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[g.Bz.forChild(y),g.Bz]}),r})(),N=(()=>{var s;class r{}return(s=r).\u0275fac=function(n){return new(n||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[F,m.m,a.UX]}),r})()}}]);