<app-loading *ngIf="isLoading"></app-loading>
<!-- separate -->
<app-popup-message
  [popupMessage]="popupMessage"
  (closePopupMessage)="received($event)"
></app-popup-message>
<!-- separate -->
<h1>profile</h1>
<hr />
<!-- separate -->
<main class="row">
  <section class="col-sm-12 col-md-8 col-lg-6">
    <div class="info">
      <p class="email"><span>Email: </span>{{ currentUser.email }}</p>
      <div class="name">
        <p><span>First name: </span>{{ currentUser.fName }}</p>
        <p><span>Last name: </span>{{ currentUser.lName }}</p>
      </div>
      <p><span>Password: </span>{{ currentUser.password }}</p>
    </div>
    <form [formGroup]="passwordForm" (ngSubmit)="onSubmit()">
      <fieldset>
        <legend>Change Password:</legend>
        <div class="form-group">
          <label for="old" class="form-label">Old password</label>
          <input
            type="text"
            class="form-control"
            id="old"
            formControlName="oldPass"
          />
          <span
            *ngIf="
            passwordForm.get('oldPass').invalid && passwordForm.get('oldPass').touched
            "
          >
            <span *ngIf="passwordForm.get('oldPass').errors['required']">
              Please insert old password!
            </span>
            <span *ngIf="passwordForm.get('oldPass').errors['pattern']">
              insert at least six chars contains: 1 upper char, 1 number & 1
              special char (!@#$%^&*)
            </span>
          </span>
        </div>
        <div class="form-group">
          <label for="new" class="form-label">New password</label>
          <input
            type="text"
            class="form-control"
            id="new"
            formControlName="newPass"
          />
          <span
            *ngIf="
            passwordForm.get('newPass').invalid && passwordForm.get('newPass').touched
            "
          >
            <span *ngIf="passwordForm.get('newPass').errors['required']">
              Please insert old password!
            </span>
            <span *ngIf="passwordForm.get('newPass').errors['pattern']">
              insert at least six chars contains: 1 upper char, 1 number & 1
              special char (!@#$%^&*)
            </span>
          </span>
        </div>
        <div class="d-flex">
          <button
            class="btn text-center"
            type="submit"
            [disabled]="passwordForm.invalid"
          >
            Change
          </button>
        </div>
      </fieldset>
    </form>
  </section>
  <hr />
  <div class="d-flex justify-content-end">
    <button
      class="btn text-center bg-danger text-light"
      type="button"
      (click)="deleteAccount()"
    >
      Delete account
    </button>
  </div>
</main>
